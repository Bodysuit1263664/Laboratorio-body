#!/usr/bin/bash
#torvpn 2021 by Ivam3.
####################
IFS=$'\n\t'                                                                                                    trap ctrl_c 2
ctrl_c() { printf "$Y\t\t   [¿] Need a help [?]$B\n\t\tTelegram : t.me/Ivam3_Bot$W\n";exit;}
chk_tor=$(curl --socks5-hostname localhost:9050 -s https://www.google.com > /dev/null;echo $?)
ip=$(proxychains4 w3m cualesmiip.com 2>/dev/null|grep -oE '([0-9]{1,3}\.){3}[0-9]{1,3}')
R='\033[1;31m'
G='\033[1;32m'
Goke='\033[92m'
Glig=='\e[1;32m'
Y='\033[1;33m'
B='\033[1;34m'
M='\033[1;35m'
C='\033[1;36m'
W='\033[0m'

for tool in tor curl w3m proxychains4;do
	[[ -e $PREFIX/bin/$tool ]] || apt install $tool >/dev/null 2>&1
done
[ $# -eq 0 ] && { printf >&2 "$R(_>)─➤$W missing argument, type $(basename $0) -h for help";exit;}
[[ $chk_tor -gt 0 ]] && { printf >&2 "$R(_>)─➤$W TOR's connection is inactive";tor &}
#	tor >/dev/null 2>&1 &
#fi
case $1 in
	-h|help)
		printf "\n$G(_>)_usage─➤ $(basename $0) <options> or <command to execute>$W\n
:::OPTIONS:::  |     :::DESCRIPTIONS:::
     ip        | show current tun0 ip address
     pip       | show current tun0 public ip address
     swip      | swip to a random ip address
     -h        | show this menu

ex: $(basename $0) pip
    $(basename $0) nmap -Pn 8.8.8.8/24\n"
		;;
	ip)
		printf "$G(_>)_Your VPN IP:─➤$W $ip$W"
		;;
	pip)
		printf "$G(_>)_Your VPN IP:─➤$W $(curl -s ifconfig.so)"
		;;
	swip)
		killall -HUP tor
		printf "$G(_>)_Your VPN IP was swapped at:─➤$W $ip\n"
		;;
	*)
		exec proxychains4 $@
		;;
esac

#			i-Haklab by @Ivam3

